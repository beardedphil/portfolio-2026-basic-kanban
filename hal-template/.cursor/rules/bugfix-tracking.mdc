---
description: Track QA failures and bugfix follow-ups
alwaysApply: true
---

# Bugfix Tracking (QA Failures + Follow-ups)

## When QA fails

- If a ticket is "done" but fails QA, create a **new bugfix ticket** (next sequential ID).
- The bugfix ticket must include:
  - **Fixes**: the original ticket ID (e.g. `Fixes: 0007`)
  - **QA failure summary**: what failed, in human terms
  - **Category**: pick one: `DnD`, `State`, `CSS`, `Build`, `Process`, `Other`

## When a ticket is returned to To-do after failure

**CRITICAL**: When a ticket fails QA/verification and is returned to the To-do column, the ticket **MUST** be updated to make the failure **OBVIOUS** and **IMPOSSIBLE TO MISS** for any implementation agent picking it up.

### Required failure markers (all must be present)

1. **Title prefix**: The ticket title **MUST** start with `[FAILED]` or `[RETRY]` (e.g., `[FAILED] 0007 — card drops persist + cross-column moves work`)

2. **Frontmatter status**: Add to the ticket's YAML frontmatter:
   ```yaml
   ---
   status: failed
   failedAttempts: <number>
   lastFailedAt: <ISO date>
   kanbanColumnId: col-todo
   ---
   ```

3. **Prominent failure section**: Add a **"⚠️ FAILURE HISTORY"** section immediately after the ticket metadata and before "Goal":
   ```markdown
   ## ⚠️ FAILURE HISTORY
   
   **This ticket has FAILED verification and is being retried.**
   
   - **Failed attempt count**: <number>
   - **Last failed**: <date>
   - **Why it failed**: <clear, specific explanation of what didn't work>
   - **What was attempted**: <brief summary of the previous implementation approach>
   - **Previous audit**: `docs/audit/<task-id>-<short-title>/` (review `pm-review.md` and `verification.md` for details)
   - **Key learnings**: <what we learned from the failure that should inform the retry>
   ```

4. **QA failure summary**: Include a detailed "QA failure summary" section that explains:
   - What specific acceptance criteria failed
   - What the verifier observed (in UI terms)
   - What the expected vs actual behavior was

5. **Implementation notes must reference failure**: The "Implementation notes" section **MUST** explicitly reference the failure and previous attempt, including:
   - What was tried before and why it didn't work
   - Suspected root causes based on the failure
   - Any new approach considerations

### Why these requirements

- **Implementation agents must immediately see** that this is a failed ticket, not a fresh one
- **The failure reason must be prominent** so agents don't repeat the same mistakes
- **Previous audit artifacts must be referenced** so agents can learn from what was attempted
- **The ticket should be impossible to miss as a retry** — both in the kanban view and when reading the ticket file

## Why

- We want a clear, auditable trail of problem points (what keeps breaking and why).
- **Failed tickets must be unmistakably marked** so implementation agents understand the context and don't waste effort repeating failed approaches.
